<!DYPE html>
<!--industry_dashboard page-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="author" content="Jimze">
    <title>NSW Business Map Dashboard</title>
    <link rel="stylesheet" href="/webjars/bootstrap/4.1.0/css/bootstrap.min.css">
    <!--<link rel="stylesheet" href="../static/css/mian.css">-->
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <script src="/webjars/jquery/3.5.1/jquery.js"></script>
    <script src="/webjars/bootstrap/4.1.0/js/bootstrap.js"></script>

    <style type="text/css">
        .sub-btn{
            font-size: 28px;
            width: 800px;
            height: 75px;
            text-align:left;
            border: 0 ;
            <!--background: #FFFFFF;-->
        }

        .description{
            font-size: 20px;

        }

        .graph{
            width: 700px;
            height:400px;
            border:2px ;
            margin: 20px 30px 20px 25px;

        }

    </style>

</head>


<body>
<nav class="navbar navbar-expand-md navbar-dark fixed-top bg-color">
    <a class="navbar-brand" href="index">NSW Business Map</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbars" aria-controls="navbars" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbars">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item ">
                <a class="nav-link" href="/index">Home </a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#">Dashboard</a>
            </li>
            <li class="nav-item ">
                <a class="nav-link " href="/license_dashboard">Business License</a>
            </li>

            <li class="nav-item">
                <a class="nav-link " href="/article">Business Insight</a>
            </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="text" placeholder="Search" aria-label="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
    </div>
</nav>



<div class="container">
    <div class="nav-breadcrumb">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/index">Home</a></li>
                <li class="breadcrumb-item"><a href="/industry_search">Industry</a></li>
                <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
            </ol>
        </nav>
    </div>

    <div class="industry-describe col-md-12">


        <h2>
            Result
        </h2>
        <hr>

        <!--        <h3 th:text="'Industry: ' + ${searchIndustry.name} +  + 'Area PostCode' + ${searchIndustry.postCode}" class="describe-h3"/></h3>-->

        <div class="describe-content">
            <i class="text-content"> Industry:</i> <strong class="text-content" style="color:#c23531"
                                                           th:text="${searchIndustry.name}"></strong>
            <p></p>
            <i class="text-content"> Area PostCode:</i> <strong class="text-content"
                                                                th:text="${searchIndustry.postCode}"></strong>
<!--            <p></p>-->
<!--            <h2>Select Information Your Concerned</h2>-->
<!--            <hr>-->

<!--            <p>A specific industry</p>-->

<!--            <ol>-->
<!--                <li>Analyzing the characteristics of the industry to recommend a location. </li>-->

<!--                <li>On average, this area has fewer restaurants than other areas, so recommend opening a restaurant in this area.Â </li>-->

<!--                <li>-->
<!--                    Find out demographic structure, recommended to open stores to sell health products.-->
<!--                </li>-->
<!--            </ol>-->
<!--            <ul>-->
<!--                <li><a href="#industry_in_postal_Box" onClick="$('#industry_in_postal_Box').show()">Average Industry</a></li>-->

<!--                <li><a href="#relatedIndustry" onClick="$('#relatedIndustryBox').show();">Related Industry</a></li>-->

<!--                <li><a href ="#hottestIndustryBox" onClick="$('#hottestIndustryBox').show()">Hottest Industry</a> </li>-->
<!--                <li> <a href ="#Population_and_other_Box" onClick="$('#Population_and_other_Box').show()">Population</a> </li>-->

<!--            </ul>-->

        </div>



<!--        <div class="describe-content col-md-10">-->

<!--        </div>-->

        <hr>


<!--        <div class="describe-content col-md-10">-->
<!--            <p>-->
<!--                The remainder of visualization chart on the data relating to <b>business exits and entry based on business size,</b>-->
<!--                the location of the business, by industry and corporate structure.-->
<!--                It also uses the available data to look at some of the characteristics of business owners in Australia and a comparison of the-->
<!--                entry and exit of businesses in Australia NSW.-->
<!--            </p>-->


<!--            <ul>-->
<!--                <li><a href ="#Num_of_businessBox" onClick="$('#Num_of_businessBox').show()"> Num_of_business</a></li>-->
<!--                <li><a href ="#Num_of_business_entries_Box" onClick="$('#Num_of_business_entries_Box').show()">Num of Business Entries </a></li>-->
<!--                <li><a href ="#Num_of_business_exits_Box"  onClick="$('#Num_of_business_exits_Box').show()">Num of Business Exits</a></li>-->
<!--            </ul>-->

<!--        </div>-->

    </div>



    <div class="container otherFunciton">


        <br><br>


        <div class="jumbotron">
            <h2>Save time with a Business Insight</h2>
            <div class="Spacer-sc-15jdacb-3 gIIudP"></div>
            <h2 class="lead">Select Information Your Concerned</h2>
            <hr>

            <p>A specific industry</p>

            <ul class="explain">
                <li>Analyzing the <b>structure of the industry </b>to recommend a location. </li>
                <br>
                <li>Preview <b>average number</b>,so recommend opening a restaurant in this area.</li>
                <br>
                <li>Find out <b>demographic</b> structure, recommended to open stores to sell health products.
                </li>

            </ul>
            <br>
            <br>

            <p class="CopyText-s17pq7-5 fNWaOh">You can search a Business Profile in this NSW Busniness Map.</p>

<!--            <a class="btn btn-lg btn-primary" href="/article" role="button">Find out more&raquo;</a>-->

            <ul>
                <li><a href="#industry_in_postal_Box" onClick="$('#industry_in_postal_Box').show()">Average Industry</a></li>

                <li><a href="#relatedIndustry" onClick="$('#relatedIndustryBox').show();">Related Industry</a></li>

                <li><a href ="#hottestIndustryBox" onClick="$('#hottestIndustryBox').show()">Hottest Industry</a> </li>
                <li> <a href ="#Population_and_other_Box" onClick="$('#Population_and_other_Box').show()">Demographic / Age / Income</a> </li>

            </ul>
        </div>



        <div class="jumbotron">
            <h2>Know More About NSW Business Condition</h2>
            <div class="Spacer-sc-15jdacb-3 gIIudP"></div>
            <p class="lead">Select Information Your Concerned</p>
            <hr>

            <h4>NSW Business Changing</h4>

            <p class="explain">
            <ul>
                <li> The remainder of visualization chart on the data relating to <b>business exits and entry based on business size,</b>
                    the location of the business, by industry and corporate structure.</li>
            <br>
            <li> It also uses the available data to look at some of the characteristics of business owners in Australia and a comparison of the
                    entry and exit of businesses in Australia NSW.</li>
            </ul>

            </p>

            <br>
            <br>

            <p class="CopyText-s17pq7-5 fNWaOh">You can search a Business Profile in this NSW Busniness Map.</p>

            <!--            <a class="btn btn-lg btn-primary" href="/article" role="button">Find out more&raquo;</a>-->


            <ul>
                <li><a href ="#Num_of_businessBox" onClick="$('#Num_of_businessBox').show()"> Num of Business In NSW</a></li>
                <li><a href ="#Num_of_business_entries_Box" onClick="$('#Num_of_business_entries_Box').show()">Num of Business Entries During 2016 -2019</a></li>
                <li><a href ="#Num_of_business_exits_Box"  onClick="$('#Num_of_business_exits_Box').show()">Num of Business Exits During 2016 -2019</a></li>
            </ul>

        </div>






        <div class="row featurette">
            <div class="col-md-7 order-md-2">
                <h2 class="featurette-heading">Preview More You Business</h2>

                <br>
                <h4>What Visual Analytics Tell US</h4>

               <p>

                   Small businesses have the ability to choose the information of their main concert and this project system gives recommendation or based on their preference <b>get Data Insight</b>.
                   The data visualization, could become more comprehensible for different <b>demographic area or educated people</b>, gives more direct visual perception.

               </p>
            </div>
<!--            <div class="col-md-5 order-md-1">-->
<!--                <svg class="bd-placeholder-img bd-placeholder-img-lg featurette-image img-fluid mx-auto" width="500" height="500" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: 500x500"><title>Placeholder</title><rect width="100%" height="100%" fill="#eee"/><text x="50%" y="50%" fill="#aaa" dy=".3em">500x500</text></svg>-->
<!--            </div>-->

            <div class="col-md-5 order-md-1" style=" width: 600px; height:400px ">
                <img  th:src="@{/img/smalllocal.jpg}" alt="" width="100%" height="100%">
            </div>

        </div>

    </div> <!-- /container -->



    <div class="industry-describe">
        <div class="span10">

            <div class="span8 offset-1 chart">

                <div>
                    <h2>
                        <button class="sub-btn" onclick=hide_show("industry_in_postal_Box")>Number of small business</button>
                    </h2>

                    <p>

                        Determine the viability of your <b>business idea</b>.
                        Choosing business your preference and Know the numerical data in NSW and Suburb Area.
                    </p>
                </div>


                <div id="industry_in_postal_Box" style="display: block">
                    <p class="description">
                        The number of cafes in this total NSW have:
                        <b>
                            <span id="totalSBNumber"></span>
                        </b>

                        <br>
                        In average, every postal area has
                        <b>
                            <span id="localNumber"></span>
                        </b>
                        <b>
                            <span id="sbName" ></span>
                        </b>

                        <br>
                    </p>

                    <hr>
                    <div id="industry_in_postal" class="graph"></div>

                </div>
            </div>

            <div class="span8 offset-1 chart">
                <h2>
                    <button class="sub-btn dropdownBtn" onclick=hide_show("hottestIndustryBox") title="Click View More">Top 10 Industries in NSW</button>
                </h2>
                <br>
                <p>

                    For those who donât know, Sydney is the economic center of Australia,
                    the capital of New South Wales and is also the most populous city in Australia.
                    <b> Sydneyâs economy is mainly driven by sectors</b> such as financial services, manufacturing, health, retail, B2B services, etc.
                    Sydney is a very good place to start a business especially because of its low cost of office space. It is cheaper to rent an office space in Sydney than it is in most popular cities of the world such as London, Paris or Hong Kong.
                    Below are a few businesses that <b> Hottest Industries in NSW</b> start in Sydney:
                </p>
                <br>



                <div id="hottestIndustryBox" style="display: none">
                    <h4 class="description">
                        Showing the top 10 small business in NSW or a postal area.
                    </h4>
                    <hr>
                    <div id="hottestIndustry" class="graph"></div>

                </div>
            </div>


            <div class="span8 offset-1 chart">
                <h2>
                    <button class="sub-btn dropdownBtn" onclick=hide_show("Population_and_other_Box")>Population, Age, Income, Education & Certificate.</button>
                </h2>

                <p>
                    People do not only make buying decisions from where they live, but also from where they work, play and travel.

                    The Business Demographic Summary tells us how many people work in an area, the size of individual businesses and the industry groups local businesses belong to.
                </p>
                <p>
                    This really assists in <b>determining the opportunity</b> for lunchtime trade, business to business marketing and assistance as to <b> which Local Area marketing promotion</b> will be most successful.
                </p>
                <div id="Population_and_other_Box" style="display: none">
                    <div >
                        <h2>
                            Population
                        </h2>
                        <div id="PopulationBox">
                            <div id="Population"  class="graph"></div>

                            <h5>
                                The lines represent the male, female and total population trend from 2014 to 2018.<br>
                                The bars represent the population density in the LGA.
                            </h5>
                            <p class="description">


                                <br>
                                    Population in Greater Sydney:
                                    <span id="population_totle"></span> <br>

                                    The population density in Greater Sydney(2014 - 2018):
                                    <span id="population_density"></span>
                                <br>

                                    Population Males Population (2014-2018) in NSW:
                                    <span id="population_male">

                                    </span>
                                <br>
                                    The population density in the rest of NSW (2014 - 2018):
                                    <span id="population_female">

                                    </span>

                                <br>
                                <br>
                            </p>

                        </div>

                    </div>

                    <hr>
                    <br>
                    <div >
                        <h2>
                            Age range
                        </h2>
                        <div id="AgeBox">
                            <div id="Age"  class="graph"></div>
                            <h5>
                                The chart shows the age composition in the searched LGA in 2018
                            </h5>
                            <br>
                            <p class="description">
                                Median Age in this LGA:<span id="median_age"> 35.3</span>
                                <br>
                                Median Age in NSW: 37.5

                                <br>
                            </p>
                        </div>
                    </div>

                    <hr>
                    <br>
                    <div >

                        <h2>
                            Income
                        </h2>
                        <div id="IncomeBox">
                            <div id="Income"  class="graph"></div>
                            <p class="description">The chart shows the median income in this LGA and NSW.<br>
                                We can use the chart to interpret purchasing power.<br>
                            </p>
                        </div>

                    </div>

                    <hr>
                    <br>
                    <div >

                        <h2>
                            Persons with Non-School Qualifications
                        </h2>
                        <div id="EducationBox">
                            <h5> --Persons aged 15 years and over - Census</h5>
                            <div id="Education" class="graph"></div>
                            <p class="description">The chart shows the composition of diplomas and certificates in this LGA.</p>
                        </div>
                    </div>
                </div>

            </div>


            <div class="span8 offset-1 chart">
                <h2>
                    <button class="sub-btn dropdownBtn" onclick=hide_show("relatedIndustryBox")>Popular small business</button>
                </h2>
                <p class="description">
                    The chart shows the number of small business inputted and the other 9 small business close to it in
                    the rank.
                </p>

                <div id="relatedIndustryBox" style="display: none">
                    <div id="relatedIndustry"  class="graph">
                    </div>
                </div>
            </div>


            <div class="span8 offset-1 chart">

                <h2>
                    <button class="sub-btn dropdownBtn" onclick=hide_show("Num_of_businessBox")>Number of Business in This LGA</button>
                </h2>
                <p class="description">
                    The number of businesses in this LGA categorized by the number of employees.
                </p>

                <div id="Num_of_businessBox" style="display: none">
                    <div id="Num_of_business"  class="graph"></div>

                </div>


            </div>


            <div class="span8 offset-1 chart">

                <h2>
                    <button class="sub-btn dropdownBtn" onclick=hide_show("Num_of_business_entries_Box")>Number of Business Entries in This LGA</button>
                </h2>
                <p>
                    SMALL BUSINESS COUNT: This value was derived by adding up business counts of businesses with 0, 1-4
                    and 5-19 employees. Due to ABS data perturbation, the âSmall Business Countâ may sometimes exceed âTotal
                    Business Countâ when the true values of small and total business counts are close
                </p>

                <div id="Num_of_business_entries_Box" style="display: none">
                    <p class="description">Business Entries: business had entered the market.</p>
                    <hr>

                    <div id="Num_of_business_entries" class="graph"></div>

                    <br><br>

                    <hr>

                    <p class="description">Business Exist: business had entered the market.</p>
                    <div id="Num_of_business_exits"  class="graph">

                    </div>


                </div>





            </div>

<!--            <div class="span8 offset-1 chart">-->
<!--                -->
<!--                <div id="Num_of_business_exits_Box" style="display: none">-->
<!--                    <p class="description">Business exits: business had left the market.</p>-->
<!--                    <hr>-->
<!--                    <div id="Num_of_business_exits"  class="graph"></div>-->

<!--                </div>-->

<!--            </div>-->

        </div>


    </div>



    <!--        <div class="industry-describe row-fluid">-->
    <!--            <div class="span8 offset2">-->
    <!--                <h2>Top Suburb about Industry</h2>-->
    <!--                <canvas class="my-4 w-100" id="myChart" width="900" height="380" style="margin-top:2em;"></canvas>-->
    <!--            </div>-->
    <!--        </div>-->


</div>

</body>


<footer class="footer">
    <hr>
    <div class="col-12 col-md">
        <div class="d-block mb-3 text-muted">&copy; USYD,CS,2020</div>
    </div>
</footer>


<script th:src="@{/js/main.js}"></script>
<script th:src="@{/js/echart.js}"></script>

<!--<script th:src="@{/visual_js/visualMap.js}"></script>-->

<script type="text/javascript">
    function hide_show(id) {

        var target = document.getElementById(id);
        if (target.style.display == "none") {
            target.style.display = "block";
        } else {
            target.style.display = "none";
        }
    }

</script>


<script th:inline="JavaScript">
    /*<![CDATA[*/
    var queryRes = [[${searchIndustry}]];
    var code = queryRes.postCode;
    const industryType =  queryRes.name;
    if(code === null || code ==''){
        code = 2000;
    }
    var resList = '/getData/' + queryRes.name+ "?code=" + code ;

    console.log(resList);
    /*]]>*/
    var report = {};
    var optionSet = {
        url: resList,
        type: 'GET',
        dataType: 'json',
        contentType: 'application/x-www-form-urlencoded',// default format
        data: report // default have dat into data
    };
    var resData = $.ajax(resList);
    console.log(resData)


    // function getRankIndustry(){
    //     var getColletURL = 'getCollection/' + queryRes.name
    //     var getRankIndustry;
    //     return new Promise((resolve, reject) => {
    //         $.post(getColletURL,
    //             function (data) {
    //                 resolve(data)
    //             });
    //     })
    // }


</script>

<!--Rank in Industry EChart start Here-->
<script type="text/javascript">
    var getColletURL = '/getCollection/' + queryRes.name
    // åºäºåå¤å¥½çdomï¼åå§åechartså®ä¾
    //var colorList = ['#2f4554', '#61a0a8', '#d48265', '#4169E1','#c23531','#91c7ae', '#749f83', '#ca8622', '#4B0082', '#FF1493'];
    var industry = ['cafe', 'store', 'book_store', 'pet_store', 'casino', 'hardware_store', 'night_club', 'liquor_store', 'book_store', 'beauty_salon'];
    var data = [9, 13, 15, 27, 31, 33, 55, 79, 88, 90];
    var myChart = echarts.init(document.getElementById('relatedIndustry'));
    // myChart.showLoading();  // å¼å¯ loading ææ

    myChart.showLoading({ text: 'Loading From Server.' })
    var RankGet = $.get(getColletURL).done(function(data) {
        function newSort(x,y){
            return x.count-y.count;
        }
        data.sort(newSort);
        // console.log(data)
        var industryName = [];
        var industryAmount = [];
        for( var i = 0; i < data.length; i++){
            industryName.push(data[i].name)
            industryAmount.push(data[i].count)
        }
        console.log("****** Rank in Industry Data loading Done!!!******")
        console.log(industryName)
        console.log(industryAmount)
        myChart.hideLoading();

        let option = {
            title: {
                text: 'Industry rank by number',
                x: 'center'
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: { // åæ è½´æç¤ºå¨ï¼åæ è½´è§¦åææ
                    "type": "shadow" // é»è®¤ä¸ºç´çº¿ï¼å¯éä¸ºï¼"line" | "shadow"
                },
                formatter: function (params)//æ°æ®æ ¼å¼
                {
                    var relVal = params[0].name + "<br/>";
                    relVal += params[0].name + ' : ' + params[0]['value']
                    return relVal;
                },
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                top: '10%',
                containLabel: true
            },
            xAxis: {
                show: false,
                type: 'value',
                //å»åº¦çº¿è®¾ç½®
                axisTick: {
                    //éèå»åº¦çº¿
                    show: true,
                },
                axisLine: {
                    //è½´çº¿æ ·å¼
                    lineStyle: {
                        //è®¾ç½®è½´çº¿å®½åº¦
                        width: 1,
                        //è½´çº¿é¢è²
                        color: 'rgba(1,134,198,0.8)'
                    }
                },
            },
            yAxis: {
                type: 'category',
                // axisTick:{
                //     show:false
                // },
                axisLabel: {
                    textStyle: {
                        color: 'rgb(119 ,136 ,153)'
                    }
                },
                data:industryName ,
                axisLine: {
                    //è½´çº¿æ ·å¼
                    lineStyle: {
                        //è®¾ç½®è½´çº¿å®½åº¦
                        width: 1,
                        //è½´çº¿é¢è²
                        color: 'rgba(1,134,198,0.8)'
                    }
                },
            },
            series: [
                {
                    name: industryName[0],
                    type: 'bar',
                    barWidth: 15,
                    barCategoryGap: '15%',
                    boundaryGap: true,
                    itemStyle: {
                        normal: {
                            // color: function (params) {
                            //     return colorList[params.dataIndex]
                            // }
                            color: function(params) {
                                var colorList = ['#2f4554', '#61a0a8', '#d48265', '#4169E1','#91c7ae', '#c23531','#749f83', '#ca8622', '#4B0082', '#FF1493'];
                                return colorList[params.dataIndex]
                            }
                        },
                    },
                    data: industryAmount
                }
            ]
        };
        myChart.setOption(option);
    }, 'json')
    // ä½¿ç¨åæå®çéç½®é¡¹åæ°æ®æ¾ç¤ºå¾è¡¨ã
    // myChart.setOption(option)
    /*
    function extractData(data){
        function newSort(x,y){
            return x.count-y.count;
        }
        data.sort(newSort);
        // console.log(data)
        var industryName = [];
        var industryAmount = [];
        for( var i = 0; i < data.length; i++){
            industryName.push(data[i].name)
            industryAmount.push(data[i].count)
        }
        console.log("******Data loading Done!!!******")
        console.log(industryName)
        console.log(industryAmount)
         return {
        name: industryName,
        value: industryAmount,
    };
    }
    $.get(getColletURL).done(function(data) {
        var industryName, industryAmount = extractData(data)
        // add option
        //add setoption here
    }, 'json')
     */

</script>
<!--Rank in Industry EChart end Here-->

<!--hottestIndustry EChart Start Here-->
<script type="text/javascript">
    var myChart_hottestIndustry = echarts.init(document.getElementById('hottestIndustry'));
    var industryList=['Gym', 'Beauty Salon', 'Book Store', 'Cafe', 'Casino','Drug Store','Locksmith','Night Club','Store','Storage'];
    var industryValue=[335,310,234,135,548,335,353,345,345,123];
    // extract data to two lists, Name + Value
    function extractData(data){
        // console.log(data)
        var industryName = [];
        var industryAmount = [];
        for( var i = 0; i < data.length; i++){
            industryName.push(data[i].name)
            industryAmount.push(data[i].count)
        }
        return {
            name: industryName,
            value: industryAmount,
        };
    }
    // change url name here
    let dataUrl =  '/hottestIndustry';
    myChart_hottestIndustry.showLoading({ text: 'Loading From Server.' })
    $.get(dataUrl).done(function(data) {
        // var getData = extractData(data)
        // var industryList = getData["name"];
        // var industryValue = getData["value"];
        // console.log("******Data loading Done!!!******")
        // console.log(industryList)
        // console.log(industryValue)
        // add option

        myChart_hottestIndustry.hideLoading();


        var transferData  = data.map(o => {return{value:o.count, name:o.name}});


        console.log("******Hottest Indusry  Data loading Done!!!******")
        console.log(transferData)

        let HottestIndustry_option = {
            title: {
                text: 'Hottest industries in NSW',
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                left: 'left',
                top:'8%',
                data: transferData.name
            },
            series: [
                {
                    type: 'pie',
                    radius: '60%',
                    center: ['60%', '50%'],
                    data:transferData,
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };
        //add setoption here
        myChart_hottestIndustry.setOption(HottestIndustry_option);
    }, 'json')

</script>
<!--hottestIndustry end Here-->


<!--Population EChart Start Here-->

<script type="text/javascript">
    var populationChart = echarts.init(document.getElementById('Population'));
    var populationData = {
        numbers: [
            [, 26040, 25716, 25284, 24989, 24790,],
            [, 27727, 27273, 26887, 26497, 26200,],
            [, 53767, 52989, 52171, 51486, 50990,],
            [, 175.7, 173.2, 170.5, 168.3, 166.7,]
        ],
        populationName: ['Males (no.)', 'Females (no.)', 'Persons (no.)', 'Population Density (pp/km2)']
    };

    // extract data to two lists, Name +
    // Value
    function populationExtract(data){
        var populationMales = [''];
        for( var i = 0; i < data.length; i++){
            populationMales.push(data[i].males)
            // console.log(data[i])
        }
        populationMales.push('');

        var populationFemales=[''];
        for( var i = 0; i < data.length; i++){
            populationFemales.push(data[i].females)
        }
        populationFemales.push('');

        var populationPerson=[''];
        for( var i = 0; i < data.length; i++){
            populationPerson.push(data[i].person)
        }
        populationPerson.push('');

        var populationDensity=[''];
        for( var i = 0; i < data.length; i++){
            populationDensity.push(data[i].density)
        }
        populationDensity.push('');

        var populationT=[];
        populationT.push(populationMales);
        populationT.push(populationFemales);
        populationT.push(populationPerson);
        populationT.push(populationDensity);

        var populationName= ['Males (no.)', 'Females (no.)', 'Persons (no.)', 'Population Density (pp/km2)'];
        return {
            populationName: populationName,
            numbers: populationT,
        };
    }




    let populationUrl =  '/population?code=' + code;

    LGAName = "Location"

    var populationGet =  $.get(populationUrl).done(function(data) {
        var getData = populationExtract(data)
        var populationName = getData["populationName"];
        var populationNumbers = getData["numbers"];

        LGAName = data[0]["lga_Name"]

        console.log("******Population Data loading Done!!!******")
        console.log(populationData)



        $("#population_totle").append(populationNumbers[2].join(", "))
        $("#population_density").append(populationNumbers[3].join(", "))
        $("#population_male").append(populationNumbers[0].join("| "))
        $("#population_female").append(populationNumbers[0].join("| "))




        // console.log(populationName)
        // console.log(populationNumbers)
        // add option
        let populationOption = {
            title: {
                text: "Population in This LGA (" + data[0]["lga_Name"] +")",
                x: 'center'
            },
            color: colorList,
            tooltip: {
                // trigger with axis
                trigger: "axis"
            },
            legend: {
                left: "5%",
                right: "5%",
                top: "20",
                textStyle: {
                    color: "#040000"
                }
            },
            grid: {
                top: "25%",
                left: "3%",
                right: "4%",
                bottom: "3%",
                show: true,
                borderColor: "#012f4a",
                containLabel: true
            },
            xAxis: {
                type: "category",
                boundaryGap: false,
                data: [
                    "2011",
                    "2014",
                    "2015",
                    "2016",
                    "2017",
                    "2018",
                    "2019"
                ],
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                }
            },
            yAxis: [{
                type: "value",
                name: "Population",
                axisTick: {
                    show: false
                },
                // ä¿®æ¹yè½´åå²çº¿çé¢è²
                splitLine: {
                    lineStyle: {
                        color: "#012f4a"
                    }
                }
            },
                {
                    type: "value",
                    min: 0,
                    max: 9000,
                    name: "Density (pp/km2)",
                    position: 'right',
                }],
            series: [
                {
                    name: populationName[0],
                    type: "line",
                    yAxisIndex: 0,
                    smooth: true,
                    data: populationNumbers[0]
                },
                {
                    name: populationName[1],
                    type: "line",
                    yAxisIndex: 0,
                    smooth: true,
                    data: populationNumbers[1]
                },
                {
                    name: populationName[2],
                    type: "line",
                    yAxisIndex: 0,
                    smooth: true,
                    data: populationNumbers[2]
                },
                {
                    name: populationName[3],
                    type: "bar",
                    yAxisIndex: 1,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: populationNumbers[3]
                }
            ]
        };
        // 3. æéç½®åæ°æ®ç»å®ä¾å¯¹è±¡
        populationChart.setOption(populationOption);
    }, 'json')


</script>

<!--Population EChart End Here-->


<!--income Start Here-->
<script type="text/javascript">
    var medianIncomeChart = echarts.init(document.getElementById('Income'));
    var sampleData = {
        numbers: [
            [,43695, 44586, 45504, 46426],[,45828, 46854, 47692, 48360]
        ],
        name: ['Albury', 'NSW']
    };

    // extract data to two lists, Name + Value
    function extractData(data){
        var incomeNSWData = [''];
        var incomeSuburbData = [''];
        var incomeData=[];
        var incomeName= ['NSW'];
        for( var i = 0; i < data.length; i++){
            if (data[i].lga_Name=="New South Wales"){
                incomeNSWData.push(data[i].median_Income)
            }else{
                incomeSuburbData.push(data[i].median_Income)
                if(incomeName.length <2){incomeName.push(data[i].lga_Name)}
            }
            // console.log(data[i])
        }
        incomeNSWData.push('');
        incomeSuburbData.push('');

        incomeData.push(incomeNSWData);
        incomeData.push(incomeSuburbData)


        return {
            incomeName: incomeName,
            incomeData: incomeData,
        };
    }

    //TODO suburb æ æ³æ¹åï¼ç¨çé½æ¯Google driveä¸é¢åçé¾æ¥çæ°æ®
    let incomeUrl =  '/income';
    var incomeGet = $.get(incomeUrl).done(function(data) {
        var getData = extractData(data)
        var incomeName = getData["incomeName"];
        var incomeData = getData["incomeData"];
        console.log("******Income Data loading Done!!!******")
        console.log(incomeName)
        console.log(incomeData)
        // add option
        let medianIncomeOption = {
            title: {
                text: "Median income in LGA (" + incomeName[0] + " & " + incomeName[1] + ")",
                x: 'center'
            },
            color: colorList,
            tooltip: {
                // trigger with axis
                trigger: "axis"
            },
            legend: {
                left: "5%",
                right: "5%",
                top: "20",
                textStyle: {
                    color: "#040000"
                }
            },
            grid: {
                top: "25%",
                left: "3%",
                right: "4%",
                bottom: "3%",
                show: true,
                borderColor: "#012f4a",
                containLabel: true
            },
            xAxis: {
                type: "category",
                boundaryGap: false,
                data: [
                    "2011",
                    "2014",
                    "2015",
                    "2016",
                    "2017",
                    "2018",
                ],
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                }
            },
            yAxis: [{
                type: "value",
                name: "Income",
                axisTick: {
                    show: false
                },
                // ä¿®æ¹yè½´åå²çº¿çé¢è²
                splitLine: {
                    lineStyle: {
                        color: "#012f4a"
                    }
                }
            }],
            series: [
                {
                    name: incomeName[0],
                    type: "bar",
                    smooth: true,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: incomeData[0]
                },
                {
                    name: incomeName[1],
                    type: "bar",
                    smooth: true,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: incomeData[1]
                }
            ]
        };
        // 3. æéç½®åæ°æ®ç»å®ä¾å¯¹è±¡
        medianIncomeChart.setOption(medianIncomeOption);
    }, 'json')

</script>
<!--income  end Here-->



<!--Industry in average industry postal EChart Start Here-->
<script type="text/javascript">
    var industry_in_postal_data = {
        numbers: [119],
        average: [30],
        name: ['Number', 'Average']
    };
    var industry_in_postal_Chart = echarts.init(document.getElementById('industry_in_postal'));
    // joint industry name + postcode
    var avgIndustryUrl = "/getAvgIndustry/"+ queryRes.name +"/?code=" + code
    $.get(avgIndustryUrl).done(function(data) {

        console.log("****** Industry in postal Data loading Done!!!******")
        console.log(data.localAmount)

        $("#totalSBNumber").append(data.localAmount)
        $("#localNumber").append(data.avgIndustry)
        $("#sbName").append(LGAName)

        var industry_in_postal_option = {
            title: {
                text: "Number of " + industryType+ " in " + LGAName,
                subtext: 'The markline means average per postal areas.',
                x: 'center'
            },
            tooltip: {
                // trigger with axis
                trigger: "axis"
            },
            legend: {
                left: "5%",
                right: "5%",
                top: "20",
                textStyle: {
                    color: "#040000"
                }
            },
            grid: {
                top: "25%",
                left: "3%",
                right: "4%",
                bottom: "3%",
                show: true,
                borderColor: "#012f4a",
                containLabel: true
            },
            xAxis: {
                type: "category",
                boundaryGap: false,
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                }
            },
            yAxis: {
                type: "value",
                name:"Number",
                axisTick: {
                    show: false
                },
                // ä¿®æ¹yè½´åå²çº¿çé¢è²
                splitLine: {
                    lineStyle: {
                        color: "#012f4a",
                    }
                }
            },
            series: [
                {
                    name: "Amount in " + LGAName,
                    type: "bar",
                    smooth: true,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    barWidth : 30,//æ±å¾å®½åº¦
                    data: [data.localAmount],
                    markLine: {
                        label: {
                            normal: {
                                show: true,
                            }
                        },
                        data: [{name: 'Average', yAxis: [data.avgIndustry]}]},
                }
            ]
        };
        // 3. æéç½®åæ°æ®ç»å®ä¾å¯¹è±¡
        industry_in_postal_Chart.setOption(industry_in_postal_option);
    },JSON)


</script>
<!--Industry in postal EChart End Here-->

<!--Age range in this LGA Start Here-->
<script type="text/javascript">
    var ageRangeChart = echarts.init(document.getElementById('Age'));
    var ageRangeData = {
        numbers: [13764, 14068, 13230, 10116, 2589],
        name: ['0-19', '20-39', '40-59', '60-79', '80 and over']
    };


    // extract data to two lists, Name + Value
    function extractAgeData(data) {
        var ageRangeData = [];
        for (var i = 0; i < data.length; i++) {
            ageRangeData.push(data[i].age_0_19)
            ageRangeData.push(data[i].age_20_39)
            ageRangeData.push(data[i].age_40_59)
            ageRangeData.push(data[i].age_60_79)
            ageRangeData.push(data[i].age_80_over)
            // console.log(data[i])
        }


        var name = ['0-19', '20-39', '40-59', '60-79', '80 and over'];

        return {
            name: name,
            ageRangeData: ageRangeData,
        };
    }

    //TODO suburb æ æ³æ¹åï¼ç¨çé½æ¯Google driveä¸é¢åçé¾æ¥çæ°æ®
    let ageRangeUrl = '/ageRange';
    var ageRangeGet = $.get(ageRangeUrl).done(function (data) {
        var getData = extractAgeData(data)
        var name = getData["name"];
        var ageRangeData = getData["ageRangeData"];
        console.log("******age Range Data loading Done!!!******")
        console.log(name)
        console.log(ageRangeData)

        let ageRangeOption = {
            title: {
                text: 'Age range in ' + data[0].lga_Name,
                x: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b}: {c} ({d}%)'
            },
            legend: {
                orient: 'vertical',
                left: 10,
                data: ['0-19', '20-39', '40-59', '60-79', '80 and over']
            },
            series: [
                {
                    name: 'age range',
                    type: 'pie',
                    radius: ['50%', '70%'],
                    avoidLabelOverlap: false,
                    label: {
                        show: false,
                        position: 'center'
                    },
                    emphasis: {
                        label: {
                            show: true,
                            fontSize: '30',
                            fontWeight: 'bold'
                        }
                    },
                    labelLine: {
                        show: false
                    },
                    data: [
                        {value: ageRangeData[0], name: name[0]},
                        {value: ageRangeData[1], name: name[1]},
                        {value: ageRangeData[2], name: name[2]},
                        {value: ageRangeData[3], name: name[3]},
                        {value: ageRangeData[4], name: name[4]},
                    ]
                }
            ]
        };

        ageRangeChart.setOption(ageRangeOption);
    }, 'json')



</script>
<!--Age range in this LGA End Here-->

<!--Number of business in this LGA Start Here-->
<script type="text/javascript">
    var numberOfBusinessChart = echarts.init(document.getElementById('Num_of_business'));
    var numberOfBusinessData = {
        numbers: [
            [0, 1878, 1548, 628, 437],
            [4617, 2738, 1190, 562, 125]
        ],
        name: ['Total number', '0 employee', '1-4 employees', '5-19 employees', 'more than 20']
    };


    // extract data to two lists, Name + Value
    function extractBusnessNumberData(data) {
        var businessSupport = [];
        var businessNumber = [];
        var businessData = [];
        for (var i = 0; i < data.length; i++) {

            var number0 = data[i].total_number;
            var number1 = data[i].employ_1_4;
            var number2 = data[i].employ_5_19;
            var number3 = data[i].employ_20_more;
            var support0 = 1;
            var support1 = number0 - number1;
            var support2 = number1 - number2;
            var support3 = number2 - number3;

            businessSupport.push(support0);
            businessSupport.push(support1);
            businessSupport.push(support2);
            businessSupport.push(support3);
            businessNumber.push(data[i].total_number);
            businessNumber.push(number1);
            businessNumber.push(number2);
            businessNumber.push(number3);

            businessData.push(businessSupport);
            businessData.push(businessNumber);
            // console.log(data[i])
        }


        var name = ['Total number', '0 employee', '1-4 employees', '5-19 employees', 'more than 20'];

        return {
            name: name,
            businessData: businessData,
        };
    }

    //TODO suburb æ æ³æ¹åï¼ç¨çé½æ¯Google driveä¸é¢åçé¾æ¥çæ°æ®
    let businessNumberUrl = '/businessNumber';
    var businessNumberGet= $.get(businessNumberUrl).done(function (data) {
        var getData = extractBusnessNumberData(data)
        var name = getData["name"];
        var businessNumberData = getData["businessData"];
        console.log("******business Number Data loading Done!!!******");

        let numberOfBusinessOption = {
            title: {
                text: "Number of Business in " + data[0].lga_Name+  " (2019)",
                x: 'center'
            },
            tooltip: {
                trigger: 'axis',
                axisPointer: {            // åæ è½´æç¤ºå¨ï¼åæ è½´è§¦åææ
                    type: 'line'        // é»è®¤ä¸ºç´çº¿ï¼å¯éä¸ºï¼'line' | 'shadow'
                }
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            xAxis: {
                type: 'category',
                splitLine: {show: false},
                data: numberOfBusinessData.name
            },
            yAxis: {
                type: 'value',
                name: "no."
            },
            series: [
                {
                    name: 'support',
                    type: 'bar',
                    stack: 'æ»é',
                    itemStyle: {
                        barBorderColor: 'rgba(0,0,0,0)',
                        color: 'rgba(0,0,0,0)'
                    },
                    emphasis: {
                        itemStyle: {
                            barBorderColor: 'rgba(0,0,0,0)',
                            color: 'rgba(0,0,0,0)'
                        }
                    },
                    data: businessNumberData[0]
                },
                {
                    name: 'Numbers',
                    type: 'bar',
                    stack: 'æ»é',
                    label: {
                        show: true,
                        position: 'inside'
                    },
                    data: businessNumberData[1]
                }
            ]
        };
        numberOfBusinessChart.setOption(numberOfBusinessOption);
    }, 'json')



</script>
<!--Number of business in this LGA End Here-->

<!--Number of Business entries Start Here-->
<script type="text/javascript">
    var businessEntriesChart = echarts.init(document.getElementById('Num_of_business_entries'));
    var colorList = ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#4B0082', '#FF1493', '#4169E1'];
    // var businessEntriesData = {
    //     numbers: [
    //         [294, 353, 346, 362],
    //         [153, 154, 128, 144],
    //         [19, 19, 7, 29],
    //         [3, , 3, 3],
    //         [471, 524, 490, 528]
    //     ],
    //     name: ['0 employee', '1-4 employees', '5-19 employees', '20 and more', 'total entries']
    // };

    function changeUnknowNumber(data) {
        if (data.zero_employee == -1) {
            data.zero_employee = '';
        }
        if (data.one_to_4 == -1) {
            data.one_to_4 = '';
        }
        if (data.five_to_20 == -1) {
            data.five_to_20 = '';
        }
        if (data.more_than_20 == -1) {
            data.more_than_20 = '';
        }
        if (data.total == -1) {
            data.total = '';
        }
        return data;
    }

    // extract data to two lists, Name + Value
    function extractBusnessEntriesData(data) {
        var businessZero = [];
        var business_1_4 = [];
        var business_5_19 = [];
        var business_20_more = [];
        var business_total = [];
        var businessEntriesData = [];
        var newData = [];
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2016") {
                newData.push(changeUnknowNumber(data[k]));
            }
        }
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2017") {
                newData.push(changeUnknowNumber(data[k]));
            }
        }
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2018") {
                newData.push(data[k]);
            }
        }
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2019") {
                newData.push(data[k]);
            }
        }

        for (var i = 0; i < newData.length; i++) {
            if (data[i].year == "2016") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            } else if (data[i].year == "2017") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            } else if (data[i].year == "2018") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            } else if (data[i].year == "2019") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            }
        }
        // console.log(data[i])
        businessEntriesData.push(businessZero);
        businessEntriesData.push(business_1_4);
        businessEntriesData.push(business_5_19);
        businessEntriesData.push(business_20_more);
        businessEntriesData.push(business_total)

        console.log(businessEntriesData);


        var name = ['0 employee', '1-4 employees', '5-19 employees', '20 and more', 'total entries'];

        return {
            name: name,
            businessEntriesData: businessEntriesData,
        };
    }


    //TODO suburb æ æ³æ¹åï¼ç¨çé½æ¯Google driveä¸é¢åçé¾æ¥çæ°æ®
    let businessEntriesUrl = '/businessEntries';
    var businessEntriesGet = $.get(businessEntriesUrl).done(function (data) {
        var getData = extractBusnessEntriesData(data)
        var businessEntriesName = getData["name"];
        var businessData = getData["businessEntriesData"];
        console.log("******business Entries Data loading Done!!!******");
        var businessEntriesData = {
            numbers: businessData,
            name: businessEntriesName
        };

        let businessEntriesOption = {
            title: {
                text: 'Business Entries in ' + data[0].lga_Name,
                subtext: 'By number of employees',
                x: 'center'
            },
            color: colorList,
            tooltip: {
                // trigger with axis
                trigger: "axis"
            },
            legend: {
                left: "5%",
                right: "5%",
                top: "50",
                textStyle: {
                    color: "#040000"
                }
            },
            grid: {
                top: "25%",
                left: "3%",
                right: "4%",
                bottom: "3%",
                show: true,
                borderColor: "#012f4a",
                containLabel: true
            },

            xAxis: {
                type: "category",
                name: "Year",
                boundaryGap: ['10%', '10%'],
                data: [
                    "2016",
                    "2017",
                    "2018",
                    "2019"
                ],
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                }
            },
            yAxis: [{
                type: "value",
                name: "Number",
                axisTick: {
                    show: false
                },
                // ä¿®æ¹yè½´åå²çº¿çé¢è²
                splitLine: {
                    lineStyle: {
                        color: "#012f4a"
                    }
                }
            }],
            series: [
                {
                    name: businessEntriesData.name[0],
                    type: "bar",
                    smooth: true,
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessEntriesData.numbers[0]
                },
                {
                    name: businessEntriesData.name[1],
                    type: 'bar',
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessEntriesData.numbers[1]
                },
                {
                    name: businessEntriesData.name[2],
                    type: "bar",
                    barGap: 0,
                    smooth: true,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessEntriesData.numbers[2]
                },
                {
                    name: businessEntriesData.name[3],
                    type: "bar",
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessEntriesData.numbers[3]
                },
                {
                    name: businessEntriesData.name[4],
                    type: "bar",
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessEntriesData.numbers[4]
                }
            ]
        };
        // 3. æéç½®åæ°æ®ç»å®ä¾å¯¹è±¡
        businessEntriesChart.setOption(businessEntriesOption);
    }, 'json')


</script>
<!-- Number of Business Entries End Here -->


<!--Number of Business exits Start Here-->
<script type="text/javascript">
    var colorList = ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#4B0082', '#FF1493', '#4169E1'];
    // var businessExitsData = {
    //     numbers: [
    //         [301, 314, 347, 356],
    //         [94, 102, 97, 106],
    //         [30, 18, 18, 26],
    //         [3, 3, 5, 4],
    //         [425, 432, 473, 499]
    //     ],
    //     name: ['0', '1-4', '5-19', '20 and more', 'total exits']
    // };



    var businessExitsChart = echarts.init(document.getElementById('Num_of_business_exits'));

    function extractBusnessExistData(data) {
        var businessZero = [];
        var business_1_4 = [];
        var business_5_19 = [];
        var business_20_more = [];
        var business_total = [];
        var businessEntriesData = [];
        var newData = [];
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2016") {
                newData.push(changeUnknowNumber(data[k]));
            }
        }
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2017") {
                newData.push(changeUnknowNumber(data[k]));
            }
        }
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2018") {
                newData.push(data[k]);
            }
        }
        for (var k = 0; k < data.length; k++) {
            if (data[k].year == "2019") {
                newData.push(data[k]);
            }
        }

        for (var i = 0; i < newData.length; i++) {
            if (data[i].year == "2016") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            } else if (data[i].year == "2017") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            } else if (data[i].year == "2018") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            } else if (data[i].year == "2019") {
                businessZero.push(newData[i].zero_employee);
                business_1_4.push(newData[i].one_to_4);
                business_5_19.push(newData[i].five_to_20);
                business_20_more.push(newData[i].more_than_20);
                business_total.push(newData[i].total);
            }
        }
        // console.log(data[i])
        businessEntriesData.push(businessZero);
        businessEntriesData.push(business_1_4);
        businessEntriesData.push(business_5_19);
        businessEntriesData.push(business_20_more);
        businessEntriesData.push(business_total)

        console.log(businessEntriesData);


        var name = ['0 employee', '1-4 employees', '5-19 employees', '20 and more', 'total entries'];

        return {
            name: name,
            businessEntriesData: businessEntriesData,
        };
    }

    let businessExitsURL =  '/exits';
    var businessExitsGet  = $.get(businessExitsURL).done(function(data) {


        extractBusnessExistData(data)

        var getData = extractBusnessExistData(data)

        console.log("****** business ExitsData   Data loading Done!!!******")
        var businessExitsData = {
            numbers: getData["businessEntriesData"],
            name: getData["name"]
        };
        console.log(businessExitsData)

        var businessExitsOption = {
            title: {
                text: 'Business Exits in '+ data[0].lga_Name,
                subtext: 'By number of employees',
                x: 'center'
            },
            color: colorList,
            tooltip: {
                // trigger with axis
                trigger: "axis"
            },
            legend: {
                left: "5%",
                right: "5%",
                top: "50",
                textStyle: {
                    color: "#040000"
                }
            },
            grid: {
                top: "25%",
                left: "3%",
                right: "4%",
                bottom: "3%",
                show: true,
                borderColor: "#012f4a",
                containLabel: true
            },

            xAxis: {
                type: "category",
                name: "Year",
                boundaryGap: ['10%', '10%'],
                data: [
                    "2016",
                    "2017",
                    "2018",
                    "2019"
                ],
                axisTick: {
                    show: false
                },
                axisLine: {
                    show: false
                }
            },
            yAxis: [{
                type: "value",
                name: "Number",
                axisTick: {
                    show: false
                },
                // ä¿®æ¹yè½´åå²çº¿çé¢è²
                splitLine: {
                    lineStyle: {
                        color: "#012f4a"
                    }
                }
            }],
            series: [
                {
                    name: businessExitsData.name[0],
                    type: "bar",
                    smooth: true,
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessExitsData.numbers[0]
                },
                {
                    name: businessExitsData.name[1],
                    type: 'bar',
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessExitsData.numbers[1]
                },
                {
                    name: businessExitsData.name[2],
                    type: "bar",
                    barGap: 0,
                    smooth: true,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessExitsData.numbers[2]
                },
                {
                    name: businessExitsData.name[3],
                    type: "bar",
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessExitsData.numbers[3]
                },
                {
                    name: businessExitsData.name[4],
                    type: "bar",
                    barGap: 0,
                    barWidth: 15,
                    label: {
                        normal: {
                            show: true,
                            position: 'top'
                        }
                    },
                    data: businessExitsData.numbers[4]
                }
            ]
        };

        // 3. æéç½®åæ°æ®ç»å®ä¾å¯¹è±¡
        businessExitsChart.setOption(businessExitsOption);

    },JSON);





</script>
<!--Number of Business exits End Here-->

<!--education Start Here-->
<script type="text/javascript">
    var colorList = ['#c23531', '#2f4554', '#61a0a8', '#d48265', '#91c7ae', '#749f83', '#ca8622', '#4B0082', '#FF1493', '#4169E1'];
    var nonSchoolData = {
        numbers: [59.2, 2.5, 2.0, 11.3, 8.5, 23.8, 11.0],
        name: ['Non-School Qualifications (%)', 'Postgraduate Degree (%)', 'Graduate Diploma/Graduate Certificate (%)', 'Bachelor Degree (%)', 'Advanced Diploma/Diploma (%)', 'Certificate (%)', 'Non-School Qualifications - Inadequately described (%)']
    };

    var nonSchoolChart = echarts.init(document.getElementById('Education'));

    let educaitonURL =  '/education';
    var educationGet  = $.get(educaitonURL).done(function(data) {

        var result = []
        var getData = data[0]
        Object.keys(getData).forEach(function(key) {
            // console.table('Key : ' + key + ', Value : ' + getData[key])
            if(key != 'year' && key != 'lga_Name'){
                let transData = {value:getData[key],name:key}
                result.push(transData)
            }
        })

        console.log("****** education  Data loading Done!!!******")
        console.log(result)

        var nonSchoolOption = {
            title: {
                text: 'Persons with Non-School Qualifications',
                subtext: 'Year - 2016',
                left: 'center'
            },
            tooltip: {
                trigger: 'item',
                formatter: '{a} <br/>{b} : {c} ({d}%)'
            },
            series: [
                {
                    name: 'Qualification',
                    type: 'pie',
                    radius: '55%',
                    center: ['40%', '50%'],
                    data: result,
                    emphasis: {
                        itemStyle: {
                            shadowBlur: 10,
                            shadowOffsetX: 0,
                            shadowColor: 'rgba(0, 0, 0, 0.5)'
                        }
                    }
                }
            ]
        };

        // 3. æéç½®åæ°æ®ç»å®ä¾å¯¹è±¡
        nonSchoolChart.setOption(nonSchoolOption);

    },JSON);






</script>
<!--Persons with Non-School Qualifications End Here-->

<!--<script th:src="@{/js/resData.js}"></script>-->


<script type="text/javascript">


    $.when(
        RankGet,
        populationGet
    ).then(function(){
        incomeGet
    }).then( function(){
        businessEntriesGet
        ageRangeGet
        businessNumberGet
        businessExitsGet
        educationGet

    }).fail(function(err){
        console.log("error");
    })


</script>

</html>